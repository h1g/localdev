#Определение базовых переменных локального окружения
#Получаем имя пользователя из-под которого запущен плейбук
ansible_user: "{{ lookup('env','USER') }}"
#Получаем тип операционной системы пользователя
os_name: "{{ lookup('env','OS_NAME') }}"
#Домашняя директория пользователя
home_dir: "{{ lookup('env','HOME') }}"
#корневая директория локального окружения
work_dir: "{{ lookup('env','WORK_DIR') }}"
#Получаем шлюз локальной сети localenv
le_net_gw: "{{ lookup('env','LE_NET_GW') }}"

#корневая директория для хранения исходного кода проектов
sources_dir:  "{{ work_dir }}/sources"
#корневая директория для хранения инфраструктурных файлов проектов
infras_dir: "{{ work_dir }}/infra"
#корневая директория для хранения конфигурационных файлов проектов
configs_dir:  "{{ work_dir }}/configs"

#Получаем идетификатор основной группы пользователя из-под которого запущен плейбук
ansible_user_gid: "{{ lookup('pipe','id -g ' + ansible_user) }}"
#Получаем идентификатор пользователя из-под которого запущен плейбук
ansible_user_uid: "{{ lookup('pipe','id -u ' + ansible_user) }}"
#Получаем идетификатор docker группы
docker_gid: "{{ lookup('pipe','stat -c%g /var/run/docker.sock') }}"
